<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.25.0/themes/prism.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.25.0/plugins/line-numbers/prism-line-numbers.css">
<script src="https://cdn.jsdelivr.net/npm/prismjs@1.25.0/components/prism-core.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs@1.25.0/plugins/autoloader/prism-autoloader.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs@1.25.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
<script src="/copy_handler.js"></script>

<script>
  let text = `<%= @paste.content %>`;
</script>

<h1><%= @paste.name %></h1>
<div style="float: left;" class="uniform-control">
  <% flash[:notice]&.tap do |notice| %>
      <div class="alert alert-success"><%= notice %></div>
  <% end %>

  <p>
    <strong>Language:</strong>
    <%= LANGUAGES.find { |pair| pair.last == @paste.language }.first %>
  </p>

  <p>
    <strong>Access:</strong>
    <%= @paste.private ? 'Private' : 'Public' %>
  </p>
  <p>
    <strong>Owner:</strong>
    <%= @paste.users_id ? User.find(@paste.users_id).username : 'Anonymous' %>
  </p>

  <div class="btn-group col-12">
  <% if @current_user&.id == @paste.users_id || @current_user&.admin %>
    <%= link_to 'Edit', edit_paste_path(@paste), class: 'btn btn-primary' %>
  <% end %>
    <%= render 'back' %>
  </div>
</div>
<div style="float: left; padding: 20px; width: calc(100% - 450px)">
  <button class="btn btn-outline-success" id="btn-copy">Copy this paste</button>
  <pre><code class="line-numbers language-<%= @paste.language.downcase %>"><%= @paste.content %></code></pre>
</div>